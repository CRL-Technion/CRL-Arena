from natnet import RigidBody, Position, Rotation, MarkerSet
from natnet.protocol import MarkerSetType


class ListenerMock:

    def __init__(self, bodies=[], marker_sets=[]):

        # initialize mock variables for test
        self.bodies = bodies
        self.marker_sets = marker_sets

    def start(self):
        pass

    def stop(self):
        pass

    def update_body(self, new_body, idx):
        # print('RigidBodies {}'.format(bodies))
        self.bodies[idx] = new_body

    def update_marker_set(self, new_marker_set, idx):
        # print('RigidBodies {}'.format(bodies))
        self.marker_sets[idx] = new_marker_set


"""
    Sets of mockup listeners to use for tests.
    Do not change or erase any mockup!
    If you want to run a test with a scenario that doesn't exists in the mockups list, add a new mockup.
    
"""
# TODO: Create an external db (or file) with mocks and read the relevant one from it

# Simple listener for init state only, with two agents
simple_listener_mock = ListenerMock(
    bodies=[
        RigidBody(body_id=202, position=Position(x=-0.6184946894645691, y=-1.5046753883361816, z=0.28236445784568787),
                  rotation=Rotation(w=-0.25549355149269104, x=0.6567047238349915, y=-0.2570480704307556, z=-0.6613534092903137)),
        RigidBody(body_id=201, position=Position(x=0.41312646865844727, y=2.0615005493164062, z=0.26566120982170105),
                  rotation=Rotation(w=0.002482916694134474, x=-0.00655442476272583, y=-0.4920026361942291, z=0.8705654740333557)),
        RigidBody(body_id=302, position=Position(x=1.5342692136764526, y=-2.997309446334839, z=0.13884088397026062),
                  rotation=Rotation(w=-0.007951263338327408, x=0.00725796353071928, y=0.7046863436698914, z=0.7094373106956482)),
        RigidBody(body_id=304, position=Position(x=-1.7294199466705322, y=-2.807265281677246, z=0.11707334965467453),
                  rotation=Rotation(w=-0.0051793199963867664, x=-0.0013618816155940294, y=0.6715370416641235, z=-0.740951657295227)),
        RigidBody(body_id=301, position=Position(x=1.5436732769012451, y=3.492931604385376, z=0.07705094665288925),
                  rotation=Rotation(w=-0.12848061323165894, x=-0.11529918015003204, y=0.9848341941833496, z=0.017332522198557854)),
        RigidBody(body_id=303, position=Position(x=-1.7389634847640991, y=3.45902943611145, z=0.053098808974027634),
                  rotation=Rotation(w=-0.014708363451063633, x=0.0021418274845927954, y=0.7453168034553528, z=0.6665447950363159)),
        RigidBody(body_id=102, position=Position(x=0.5780453681945801, y=0.5576375126838684, z=0.17235736548900604),
                  rotation=Rotation(w=-0.003422209294512868, x=0.0006093098199926317, y=0.00593399116769433, z=-0.999976396560669)),
        RigidBody(body_id=101, position=Position(x=-0.8547602295875549, y=1.8607343435287476, z=0.15301944315433502),
                  rotation=Rotation(w=0.007418448105454445, x=0.0005733311991207302, y=0.01946953497827053, z=-0.9997828602790833)),
        RigidBody(body_id=305, position=Position(x=0.5016958713531494, y=-0.6835051774978638, z=0.27364760637283325),
                  rotation=Rotation(w=0.48389583826065063, x=0.7533608675003052, y=0.12447880208492279, z=-0.4275481402873993)),
        RigidBody(body_id=306, position=Position(x=-0.645233154296875, y=0.43597662448883057, z=0.25451382994651794),
                  rotation=Rotation(w=-0.007398134097456932, x=0.005945743061602116, y=0.9392411708831787, z=-0.3431268036365509))],

    marker_sets=[MarkerSet(name="Obstacle1",
                           type=MarkerSetType.Obstacle,
                           positions=[Position(x=0.3344397246837616, y=2.2127983570098877, z=0.24899573624134064),
                                      Position(x=0.5193570852279663, y=2.192119598388672, z=0.27482882142066956),
                                      Position(x=0.3005121946334839, y=1.9310294389724731, z=0.276297003030777),
                                      Position(x=0.49815958738327026, y=1.9103490114212036, z=0.2625640630722046)]),
                 MarkerSet(name="Obstacle2",
                           type=MarkerSetType.Obstacle,
                           positions=[Position(x=-0.7843166589736938, y=-1.501540184020996, z=0.2851812243461609),
                                      Position(x=-0.6307834982872009, y=-1.4393396377563477, z=0.2847244143486023),
                                      Position(x=-0.5845072269439697, y=-1.6836568117141724, z=0.28648409247398376),
                                      Position(x=-0.6521972417831421, y=-1.3533931970596313, z=0.27181941270828247),
                                      Position(x=-0.44075483083724976, y=-1.545526146888733, z=0.28339052200317383)]),
                 MarkerSet(name="Obstacle3",
                           type=MarkerSetType.Obstacle,
                           positions=[Position(x=0.4004615545272827, y=-0.7318142652511597, z=0.2689376771450043),
                                      Position(x=0.6190930008888245, y=-0.5264616012573242, z=0.292189359664917),
                                      Position(x=0.356669157743454, y=-0.6351493000984192, z=0.26795756816864014),
                                      Position(x=0.43409889936447144, y=-0.8177512884140015, z=0.26930680871009827),
                                      Position(x=0.6982753872871399, y=-0.7067384123802185, z=0.27022358775138855)]),
                 MarkerSet(name="Obstacle4",
                           type=MarkerSetType.Obstacle,
                           positions=[Position(x=-0.640259861946106, y=0.34323978424072266, z=0.2546177804470062),
                                      Position(x=-0.6977149248123169, y=0.2998248338699341, z=0.25352415442466736),
                                      Position(x=-0.8126506805419922, y=0.4478461444377899, z=0.25149714946746826),
                                      Position(x=-0.5968937873840332, y=0.6209328174591064, z=0.26057106256484985),
                                      Position(x=-0.478571355342865, y=0.4680822193622589, z=0.252399742603302)]),
                 MarkerSet(name="Corner-TR",
                           type=MarkerSetType.Corner,
                           positions=[Position(x=1.5346336364746094, y=-2.9643614292144775, z=0.1555822193622589),
                                      Position(x=1.453810214996338, y=-3.013350248336792, z=0.1299135386943817),
                                      Position(x=1.6144806146621704, y=-3.0139482021331787, z=0.1304773986339569)]),
                 MarkerSet(name="Corner-BR",
                           type=MarkerSetType.Corner,
                           positions=[Position(x=-1.680135726928711, y=-2.7574446201324463, z=0.10911296308040619),
                                      Position(x=-1.6821014881134033, y=-2.8622870445251465, z=0.1342974752187729),
                                      Position(x=-1.8259907960891724, y=-2.802090644836426, z=0.10785707086324692)]),
                 MarkerSet(name="Corner-TL",
                           type=MarkerSetType.Corner,
                           positions=[Position(x=1.4678937196731567, y=3.572374105453491, z=0.07218323647975922),
                                      Position(x=1.5450019836425781, y=3.495903730392456, z=0.07367724180221558),
                                      Position(x=1.6180552244186401, y=3.410233974456787, z=0.0855463296175003)]),
                 MarkerSet(name="Corner-BL",
                           type=MarkerSetType.Corner,
                           positions=[Position(x=-1.7198983430862427, y=3.3940553665161133, z=0.05462150648236275),
                                      Position(x=-1.7181435823440552, y=3.4907732009887695, z=0.0522657185792923),
                                      Position(x=-1.7790695428848267, y=3.4924049377441406, z=0.05229753255844116)]),
                 MarkerSet(name="Rosie-2",
                           type=MarkerSetType.Robot,
                           positions=[Position(x=0.5951037406921387, y=0.5292147397994995, z=0.1886003613471985),
                                      Position(x=0.6110214591026306, y=0.6120184063911438, z=0.16515624523162842),
                                      Position(x=0.5278427600860596, y=0.5316101312637329, z=0.16333530843257904)]),
                 MarkerSet(name="Ruby-1",
                           type=MarkerSetType.Corner,
                           positions=[Position(x=-0.8884782195091248, y=1.829779863357544, z=0.16961832344532013),
                                      Position(x=-0.8893804550170898, y=1.8923441171646118, z=0.1441146433353424),
                                      Position(x=-0.7864573001861572, y=1.860068917274475, z=0.1453550159931183)]),
                 MarkerSet(name="all",
                           type=MarkerSetType.All,
                           positions=[Position(x=-0.7843166589736938, y=-1.501540184020996, z=0.2851812243461609),
                                                  Position(x=-0.6307834982872009, y=-1.4393396377563477, z=0.2847244143486023),
                                                  Position(x=-0.5845072269439697, y=-1.6836568117141724, z=0.28648409247398376),
                                                  Position(x=-0.6521972417831421, y=-1.3533931970596313, z=0.27181941270828247),
                                                  Position(x=-0.44075483083724976, y=-1.545526146888733, z=0.28339052200317383),
                                                  Position(x=0.3344397246837616, y=2.2127983570098877, z=0.24899573624134064),
                                                  Position(x=0.5193570852279663, y=2.192119598388672, z=0.27482882142066956),
                                                  Position(x=0.3005121946334839, y=1.9310294389724731, z=0.276297003030777),
                                                  Position(x=0.49815958738327026, y=1.9103490114212036, z=0.2625640630722046),
                                                  Position(x=1.5346336364746094, y=-2.9643614292144775, z=0.1555822193622589),
                                                  Position(x=1.453810214996338, y=-3.013350248336792, z=0.1299135386943817),
                                                  Position(x=1.6144806146621704, y=-3.0139482021331787, z=0.1304773986339569),
                                                  Position(x=-1.680135726928711, y=-2.7574446201324463, z=0.10911296308040619),
                                                  Position(x=-1.6821014881134033, y=-2.8622870445251465, z=0.1342974752187729),
                                                  Position(x=-1.8259907960891724, y=-2.802090644836426, z=0.10785707086324692),
                                                  Position(x=1.4678937196731567, y=3.572374105453491, z=0.07218323647975922),
                                                  Position(x=1.5450019836425781, y=3.495903730392456, z=0.07367724180221558),
                                                  Position(x=1.6180552244186401, y=3.410233974456787, z=0.0855463296175003),
                                                  Position(x=-1.7198983430862427, y=3.3940553665161133, z=0.05462150648236275),
                                                  Position(x=-1.7181435823440552, y=3.4907732009887695, z=0.0522657185792923),
                                                  Position(x=-1.7790695428848267, y=3.4924049377441406, z=0.05229753255844116),
                                                  Position(x=0.5951037406921387, y=0.5292147397994995, z=0.1886003613471985),
                                                  Position(x=0.6110214591026306, y=0.6120184063911438, z=0.16515624523162842),
                                                  Position(x=0.5278427600860596, y=0.5316101312637329, z=0.16333530843257904),
                                                  Position(x=-0.8884782195091248, y=1.829779863357544, z=0.16961832344532013),
                                                  Position(x=-0.8893804550170898, y=1.8923441171646118, z=0.1441146433353424),
                                                  Position(x=-0.7864573001861572, y=1.860068917274475, z=0.1453550159931183),
                                                  Position(x=0.4004615545272827, y=-0.7318142652511597, z=0.2689376771450043),
                                                  Position(x=0.6190930008888245, y=-0.5264616012573242, z=0.292189359664917),
                                                  Position(x=0.356669157743454, y=-0.6351493000984192, z=0.26795756816864014),
                                                  Position(x=0.43409889936447144, y=-0.8177512884140015, z=0.26930680871009827),
                                                  Position(x=0.6982753872871399, y=-0.7067384123802185, z=0.27022358775138855),
                                                  Position(x=-0.640259861946106, y=0.34323978424072266, z=0.2546177804470062),
                                                  Position(x=-0.6977149248123169, y=0.2998248338699341, z=0.25352415442466736),
                                                  Position(x=-0.8126506805419922, y=0.4478461444377899, z=0.25149714946746826),
                                                  Position(x=-0.5968937873840332, y=0.6209328174591064, z=0.26057106256484985),
                                                  Position(x=-0.478571355342865, y=0.4680822193622589, z=0.252399742603302)])]
)
